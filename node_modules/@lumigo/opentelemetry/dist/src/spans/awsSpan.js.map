{"version":3,"file":"awsSpan.js","sourceRoot":"","sources":["../../../src/spans/awsSpan.ts"],"names":[],"mappings":";;;AAAA,wCASwB;AAEX,QAAA,gBAAgB,GAAG,UAAU,CAAC;AAE9B,QAAA,mBAAmB,GAAG,CAAC,UAAU,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;AAEtF,MAAM,qBAAqB,GAAG,CAAC,IAAI,GAAG,EAAE,EAAE,EAAE;IACjD,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACnC,IAAI,2BAAmB,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;QACzC,OAAO,OAAO,CAAC;KAChB;IAED,IAAI,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC;QAAE,OAAO,OAAO,CAAC;IAEjD,OAAO,wBAAgB,CAAC;AAC1B,CAAC,CAAC;AATW,QAAA,qBAAqB,yBAShC;AAWF,6DAA6D;AACtD,MAAM,iBAAiB,GAAG,CAAC,WAAW,EAAE,YAAY,EAAkB,EAAE;IAC7E,MAAM,EAAE,IAAI,EAAE,GAAG,WAAW,CAAC;IAC7B,MAAM,UAAU,GAAG,IAAA,6BAAqB,EAAC,IAAI,CAAC,CAAC;IAE/C,QAAQ,UAAU,EAAE;QAClB,KAAK,UAAU;YACb,OAAO,IAAA,oBAAc,EAAC,WAAW,CAAC,CAAC;QACrC,KAAK,KAAK;YACR,OAAO,IAAA,eAAS,EAAC,WAAW,EAAE,YAAY,CAAC,CAAC;QAC9C,KAAK,QAAQ;YACX,OAAO,IAAA,kBAAY,EAAC,WAAW,EAAE,YAAY,CAAC,CAAC;QACjD,KAAK,KAAK;YACR,OAAO,IAAA,eAAS,EAAC,WAAW,EAAE,YAAY,CAAC,CAAC;QAC9C,KAAK,SAAS;YACZ,OAAO,IAAA,mBAAa,EAAC,WAAW,EAAE,YAAY,CAAC,CAAC;QAClD,KAAK,OAAO;YACV,OAAO,IAAA,iBAAW,EAAC,WAAW,EAAE,YAAY,CAAC,CAAC;QAChD,KAAK,QAAQ;YACX,OAAO,IAAA,uBAAiB,EAAC,WAAW,EAAE,YAAY,CAAC,CAAC;QACtD;YACE,OAAO,IAAA,eAAS,EAAC,WAAW,EAAE,YAAY,CAAC,CAAC;KAC/C;AACH,CAAC,CAAC;AAtBW,QAAA,iBAAiB,qBAsB5B","sourcesContent":["import {\n  apigwParser,\n  awsParser,\n  dynamodbParser,\n  eventBridgeParser,\n  kinesisParser,\n  lambdaParser,\n  snsParser,\n  sqsParser,\n} from '../parsers/aws';\n\nexport const EXTERNAL_SERVICE = 'external';\n\nexport const AWS_PARSED_SERVICES = ['dynamodb', 'sns', 'lambda', 'sqs', 'kinesis', 'events'];\n\nexport const getAwsServiceFromHost = (host = '') => {\n  const service = host.split('.')[0];\n  if (AWS_PARSED_SERVICES.includes(service)) {\n    return service;\n  }\n\n  if (host.includes('execute-api')) return 'apigw';\n\n  return EXTERNAL_SERVICE;\n};\n\nexport type AwsServiceData = {\n  awsServiceData?: {\n    [key: string]: any;\n  };\n  messageId?: string;\n  lumigoData?: string;\n  [key: string]: any;\n};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport const getAwsServiceData = (requestData, responseData): AwsServiceData => {\n  const { host } = requestData;\n  const awsService = getAwsServiceFromHost(host);\n\n  switch (awsService) {\n    case 'dynamodb':\n      return dynamodbParser(requestData);\n    case 'sns':\n      return snsParser(requestData, responseData);\n    case 'lambda':\n      return lambdaParser(requestData, responseData);\n    case 'sqs':\n      return sqsParser(requestData, responseData);\n    case 'kinesis':\n      return kinesisParser(requestData, responseData);\n    case 'apigw':\n      return apigwParser(requestData, responseData);\n    case 'events':\n      return eventBridgeParser(requestData, responseData);\n    default:\n      return awsParser(requestData, responseData);\n  }\n};\n"]}