{"version":3,"file":"LumigoDistroDetector.js","sourceRoot":"","sources":["../../../../src/resources/detectors/LumigoDistroDetector.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,sDAAsD;AACtD,2CAAuC;AACvC,wDAAuF;AAE1E,QAAA,qBAAqB,GAAG,uBAAuB,CAAC;AAE7D;;;GAGG;AACH,MAAa,oBAAoB;IACzB,MAAM,CAAC,OAAiC;;YAC5C,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;gBAC7B,IAAI,aAAa,GAAG,SAAS,CAAC;gBAC9B,IAAI;oBACF,8DAA8D;oBAC9D,MAAM,EAAE,OAAO,EAAE,GAAG,OAAO,CAAC,uBAAuB,CAAC,CAAC;oBACrD,aAAa,GAAG,OAAO,CAAC;iBACzB;gBAAC,OAAO,CAAC,EAAE;oBACV,gBAAM,CAAC,KAAK,CAAC,sCAAsC,CAAC,CAAC;iBACtD;gBAED,OAAO,CACL,IAAI,oBAAQ,CAAC;oBACX,CAAC,6BAAqB,CAAC,EAAE,aAAa;iBACvC,CAAC,CACH,CAAC;YACJ,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;CACF;AAnBD,oDAmBC","sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { logger } from '../../logging';\nimport { Detector, Resource, ResourceDetectionConfig } from '@opentelemetry/resources';\n\nexport const LUMIGO_DISTRO_VERSION = 'lumigo.distro.version';\n\n/**\n * LumigoDistroDetector provides resource attributes documeting which version of the\n * Lumigo Distro for OpenTelemetry is used.\n */\nexport class LumigoDistroDetector implements Detector {\n  async detect(_config?: ResourceDetectionConfig): Promise<Resource> {\n    return new Promise((resolve) => {\n      let distroVersion = 'unknown';\n      try {\n        // eslint-disable-next-line @typescript-eslint/no-var-requires\n        const { version } = require('../../../package.json');\n        distroVersion = version;\n      } catch (e) {\n        logger.debug('Cannot look up Lumigo distro version');\n      }\n\n      resolve(\n        new Resource({\n          [LUMIGO_DISTRO_VERSION]: distroVersion,\n        })\n      );\n    });\n  }\n}\n"]}